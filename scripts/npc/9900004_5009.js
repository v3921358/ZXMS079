var status = -1;
var msg;
var sel;
var item = [1932006,1932007,1932008,1932009,1932010,1932011,1932012,1932013,1932014,1932015,1932016,1932017,1932018,1932020,1932021,1932022,1932023,1932025,1932026,1932027,1932028,1932029,1932030,1932031,1932032,1932033,1932034,1932035,1932036,1932038,1932041,1932043,1932044,1932045,1932046,1932047,1932048,1932049,1932050,1932051,1932052,1932053,1932054,1932055,1932056,1932057,1932058,1932059,1932060,1932061,1932062,1932063,1932064,1932065,1932066,1932071,1932072,1932078,1932080,1932081,1932083,1932084,1932001,1932086,1932087,1932088,1932089,1932090,1932091,1932092,1932093,1932094,1932095,1932096,1932097,1932098,1932099,1932100,1932102,1932103,1932105,1932106,1932107,1932108,1932109,1932110,1932112,1932113,1932114,1932115,1932116,1932117,1932118,1932119,1932120,1932121,1932122,1932123,1932124,1932126,1932127,1932128,1932129,1932130,1932131,1932132,1932133,1932134,1932135,1932136,1932137,1932138,1932139,1932140,1932141,1932142,1932143,1932144,1932145,1932146,1932147,1932148,1932149,1932150,1932151,1932152,1932153,1932154,1932155,1932156,1932157,1932158,1932159,1932002,1932161,1932162,1932163,1932164,1932165,1932166,1932167,1932168,1932169,1932170,1932171,1932172,1932173,1932174,1932175,1932176,1932177,1932178,1932179,1932180,1932181,1932182,1932183,1932184,1932185,1932186,1932187,1932188,1932189,1932190,1932191,1932192,1932193,1932194,1932195,1932196,1932197,1932198,1932199,1932200,1932201,1932202,1932203,1932204,1932205,1932206,1932207,1932208,1932211,1932212,1932213,1932214,1932215,1932216,1932217,1932218,1932219,1932220,1932221,1932222,1932223,1932224,1932225,1932226,1932227,1932228,1932230,1932231,1932232,1932234,1932235,1932236,1932237,1932238,1932239,1932240,1932241,1932242,1932243,1932244,1932245,1932246,1932247,1932248,1932249,1932250,1932251,1932252,1932253,1932254,1932255,1932256,1932258,1932259,1932260,1932261,1932262,1932263,1932264,1932265,1932266,1932267,1932268,1932269,1932270,1932271,1932272,1932273,1932274,1932275,1932276,1932277,1932279,1932280,1932281,1932282,1932286,1932287,1932288,1932289,1932290,1932291,1932292,1932293,1932294,1932295,1932296,1932297,1932298,1932299,1932300,1932301,1932302,1932303,1932304,1932305,1932306,1932307,1932308,1932310,1932311,1932313,1932314,1932315,1932316,1932317,1932318,1932319,1932320,1932321,1932322,1932323,1932324,1932325,1932326,1932327,1932329,1932330,1932332,1932334,1932335,1932336,1932337,1932338,1932339,1932341,1932342,1932350,1932351,1932352,1932353,1932355,1932366,1939000,1939001,1939002,1939003,1939004,1939005,1930001,1932005];
var random = true;
var need = 0;

function start(){
	action(1, 0, 0);
}

function action(mode, type, selection){
	if(mode == 1){
		status++;
	} else if(mode == 0){
		status--;
	} else {
		cm.dispose();
		return;
	}
	if(status == 0) {
		msg = "#r使用方法：#k抽取坐骑后，请点击自己技能栏，新手技能栏有个#r[飞碟坐骑]#k的技能，使用该技能即可查看抽取的坐骑外貌，再次抽奖可以更换，随机到自己喜欢的，就不必随机了，永久使用!下乘骑宠: #b右键右上角飞碟BUFF图标即可下乘坐骑.#k\r\n\r\n#r    注意:本骑宠属于技能骑宠,不可以爬绳子\r\n (过图需重新打开,不然自己看得到,别人是看不到的)\r\n\r\n";
		if(cm.getPlayer().getMountId() != 0 && Packages.server.MapleItemInformationProvider.getInstance().itemExists(cm.getPlayer().getMountId())){
			msg += "\r\n#d 目前你的骑宠是 : #i" + cm.getPlayer().getMountId() + "##t" + cm.getPlayer().getMountId() + "#";
		}
		cm.sendYesNo(msg);
	} else if(status == 1) {
		cm.sendSimple("#b#L0# 抽取骑宠 #r需求：(0点点卷/次)#n#l\r\n\r\n #L1#查看骑宠种类");
	} else if(status == 2) {
		msg = "\r\n";
		if(selection == 1){
			  cm.sendOk("#r#e骑宠种类如下:\r\n\r\n#v1932006#  #v1932007#  #v1932008#  #v1932009#  #v1932010#  #v1932011#  #v1932012#  #v1932013#  #v1932014#  #v1932015#  #v1932016#  #v1932017#  #v1932018#  #v1932020#  #v1932021#  #v1932022#  #v1932023#  #v1932025#  #v1932026#  #v1932027#  #v1932028#  #v1932029#  #v1932030#  #v1932031#  #v1932032#  #v1932033#  #v1932034#  #v1932035#  #v1932036#  #v1932038#  #v1932041#  #v1932043#  #v1932044#  #v1932045#  #v1932046#  #v1932047#  #v1932048#  #v1932049#  #v1932050#  #v1932051#  #v1932052#  #v1932053#  #v1932054#  #v1932055#  #v1932056#  #v1932057#  #v1932058#  #v1932059#  #v1932060#  #v1932061#  #v1932062#  #v1932063#  #v1932064#  #v1932065#  #v1932066#  #v1932071#  #v1932072#  #v1932078#  #v1932080#  #v1932081#  #v1932083#  #v1932084#  #v1932001#  #v1932086#  #v1932087#  #v1932088#  #v1932089#  #v1932090#  #v1932091#  #v1932092#  #v1932093#  #v1932094#  #v1932095#  #v1932096#  #v1932097#  #v1932098#  #v1932099#  #v1932100#  #v1932102#  #v1932103#  #v1932105#  #v1932106#  #v1932107#  #v1932108#  #v1932109#  #v1932110#  #v1932112#  #v1932113#  #v1932114#  #v1932115#  #v1932116#  #v1932117#  #v1932118#  #v1932119#  #v1932120#  #v1932121#  #v1932122#  #v1932123#  #v1932124#  #v1932126#  #v1932127#  #v1932128#  #v1932129#  #v1932130#  #v1932131#  #v1932132#  #v1932133#  #v1932134#  #v1932135#  #v1932136#  #v1932137#  #v1932138#  #v1932139#  #v1932140#  #v1932141#  #v1932142#  #v1932143#  #v1932144#  #v1932145#  #v1932146#  #v1932147#  #v1932148#  #v1932149#  #v1932150#  #v1932151#  #v1932152#  #v1932153#  #v1932154#  #v1932155#  #v1932156#  #v1932157#  #v1932158#  #v1932159#  #v1932002#  #v1932161#  #v1932162#  #v1932163#  #v1932164#  #v1932165#  #v1932166#  #v1932167#  #v1932168#  #v1932169#  #v1932170#  #v1932171#  #v1932172#  #v1932173#  #v1932174#  #v1932175#  #v1932176#  #v1932177#  #v1932178#  #v1932179#  #v1932180#  #v1932181#  #v1932182#  #v1932183#  #v1932184#  #v1932185#  #v1932186#  #v1932187#  #v1932188#  #v1932189#  #v1932190#  #v1932191#  #v1932192#  #v1932193#  #v1932194#  #v1932195#  #v1932196#  #v1932197#  #v1932198#  #v1932199#  #v1932200#  #v1932201#  #v1932202#  #v1932203#  #v1932204#  #v1932205#  #v1932206#  #v1932207#  #v1932208#  #v1932211#  #v1932212#  #v1932213#  #v1932214#  #v1932215#  #v1932216#  #v1932217#  #v1932218#  #v1932219#  #v1932220#  #v1932221#  #v1932222#  #v1932223#  #v1932224#  #v1932225#  #v1932226#  #v1932227#  #v1932228#  #v1932230#  #v1932231#  #v1932232#  #v1932234#  #v1932235#  #v1932236#  #v1932237#  #v1932238#  #v1932239#  #v1932240#  #v1932241#  #v1932242#  #v1932243#  #v1932244#  #v1932245#  #v1932246#  #v1932247#  #v1932248#  #v1932249#  #v1932250#  #v1932251#  #v1932252#  #v1932253#  #v1932254#  #v1932255#  #v1932256#  #v1932258#  #v1932259#  #v1932260#  #v1932261#  #v1932262#  #v1932263#  #v1932264#  #v1932265#  #v1932266#  #v1932267#  #v1932268#  #v1932269#  #v1932270#  #v1932271#  #v1932272#  #v1932273#  #v1932274#  #v1932275#  #v1932276#  #v1932277#  #v1932279#  #v1932280#  #v1932281#  #v1932282#  #v1932286#  #v1932287#  #v1932288#  #v1932289#  #v1932290#  #v1932291#  #v1932292#  #v1932293#  #v1932294#  #v1932295#  #v1932296#  #v1932297#  #v1932298#  #v1932299#  #v1932300#  #v1932301#  #v1932302#  #v1932303#  #v1932304#  #v1932305#  #v1932306#  #v1932307#  #v1932308#  #v1932310#  #v1932311#  #v1932313#  #v1932314#  #v1932315#  #v1932316#  #v1932317#  #v1932318#  #v1932319#  #v1932320#  #v1932321#  #v1932322#  #v1932323#  #v1932324#  #v1932325#  #v1932326#  #v1932327#  #v1932329#  #v1932330#  #v1932332#  #v1932334#  #v1932335#  #v1932336#  #v1932337#  #v1932338#  #v1932339#  #v1932341#  #v1932342#  #v1932350#  #v1932351#  #v1932352#  #v1932353#  #v1932355#  #v1932366#  #v1939000#  #v1939001#  #v1939002#  #v1939003#  #v1939004#  #v1939005#  #v1930001#  #v1932005#");
			cm.dispose();
		}
		
		if(selection == 0 && random){
			if(cm.getPlayer().getNX() < need){
				cm.sendNext("点卷不足" + need);
				cm.dispose();
				return;
			} else if(!cm.canHold(1932081)){
				//cm.sendNext("装备栏空间不足");
				//cm.dispose();
				//return;
			}
			
			var exist = true;
			do{
				sel = Math.floor(Math.random() * item.length);
				exist = Packages.server.MapleItemInformationProvider.getInstance().itemExists(item[sel]);
			}while(!exist);
			cm.getPlayer().setMountId(item[sel]);
			cm.getPlayer().modifyCSPoints(1, -need, true);
			cm.sendNext("你获得了 #i"+item[sel]+":##t"+item[sel]+"#");
			cm.dispose();
		} else {
			if(selection == 0){
				for(var i = 0; i < item.length; i++){
					msg += "#L"+i+"##i"+item[i]+":##t"+item[i]+"\r\n";
				}
				cm.sendSimple(msg);
			}
		}
	} else if(status == 3){
		if(!random){
			sel = selection;
			cm.sendYesNo("你确定是否选择 #i"+item[sel]+":##t"+item[sel]+"#");
		}
	} else if(status == 4){
		if(!random){
			cm.getPlayer().setMountId(item[sel]);
			cm.sendNext("你获得了 #i"+item[sel]+":##t"+item[sel]+"#");
			cm.dispose();
		}
	} else {
		cm.dispose();
	}
}