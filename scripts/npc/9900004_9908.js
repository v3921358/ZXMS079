


var fbmc = "[暖暖系统]-(椅子抽奖)";//副本名称
var costitem = 4032226;
var itemCount = 2;
var sum = 0;
var finalchance = 0
var chance1 = 0.00;

var itemList =[
[3010000,100],
[3010001,100],
[3010002,100],
[3010003,100],
[3010004,100],
[3010005,100],
[3010006,100],
[3010007,100],
[3010008,100],
[3010009,100],
[3010010,100],
[3010012,100],
[3010013,100],
[3010014,100],
[3010016,100],
[3010017,100],
[3010018,100],
[3010019,100],
[3010021,100],
[3010024,100],
[3010025,100],
[3010026,100],
[3010028,100],
[3010029,100],
[3010030,100],
[3010031,100],
[3010032,100],
[3010033,100],
[3010034,100],
[3010035,100],
[3010036,100],
[3010037,100],
[3010038,100],
[3010039,100],
[3010040,100],
[3010041,100],
[3010043,100],
[3010044,100],
[3010045,100],
[3010046,100],
[3010047,100],
[3010048,100],
[3010049,100],
[3010050,100],
[3010051,100],
[3010052,100],
[3010053,100],
[3010054,100],
[3010055,100],
[3010057,100],
[3010058,100],
[3010059,100],
[3010060,100],
[3010061,100],
[3010062,100],
[3010063,100],
[3010064,100],
[3010065,100],
[3010066,100],
[3010067,100],
[3010068,100],
[3010069,100],
[3010070,23],//巨无霸品克缤
[3010071,100],
[3010073,100],
[3010075,100],
[3010077,100],
[3010078,100],
[3010079,100],
[3010080,100],
[3010081,100],
[3010082,100],//
[3010083,100],
[3010084,100],
[3010085,100],
[3010086,100],
[3010092,100],
[3010093,100],
[3010094,100],
[3010095,100],
[3010096,100],
[3010097,100],
[3010098,100],
[3010099,100],
[3010100,100],
[3010102,100],
[3010103,100],
[3010104,100],
[3010106,100],
[3010107,100],
[3010108,100],
[3010109,100],
[3010110,100],//
[3010111,100],
[3010112,100],
[3010113,100],
[3010114,100],
[3010115,100],
[3010116,100],
[3010117,100],
[3010118,100],
[3010119,100],
[3010120,100],
[3010123,100],
[3010124,100],
[3010125,100],
[3010126,100],
[3010127,100],
[3010128,100],
[3010129,100],
[3010130,100],
[3010131,100],
[3010132,100],
[3010133,100],
[3010134,100],//
[3010135,100],
[3010136,100],
[3010137,100],
[3010138,100],
[3010139,100],
[3010140,100],
[3010141,100],
[3010142,100],
[3010144,100],
[3010145,100],
[3010147,100],
[3010149,100],
[3010151,100],
[3010152,100],
[3010154,100],
[3010155,100],
[3010156,100],//
[3010157,100],
[3010161,100],
[3010162,100],
[3010163,100],
[3010166,100],
[3010167,100],
[3010168,100],
[3010169,100],
[3010170,100],
[3010171,100],
[3010172,100],
[3010173,100],
[3010174,100],
[3010175,100],
[3010177,100],
[3010179,100],
[3010180,100],
[3010181,100],
[3010182,100],
[3010183,50],//胡萝卜椅子
[3010184,100],//
[3010186,100],
[3010187,100],
[3010188,100],
[3010189,100],
[3010191,100],
[3010193,100],
[3010194,100],
[3010195,100],
[3010196,100],
[3010197,100],
[3010199,100],
[3010200,100],
[3010201,100],
[3010202,100],
[3010203,100],
[3010205,100],
[3010206,100],
[3010207,100],
[3010208,100],
[3010209,100],
[3010210,100],
[3010211,100],
[3010212,100],
[3010215,100],
[3010216,100],
[3010217,100],
[3010218,100],
[3010219,100],
[3010220,100],
[3010221,100],
[3010222,100],
[3010223,100],
[3010224,100],
[3010225,100],
[3010226,100],
[3010257,100],
[3010279,100],
[3010280,100],
[3010281,100],
[3010282,100],
[3010283,100],
[3010286,100],
[3010287,100],
[3010288,100],
[3010289,100],
[3010290,100],
[3010291,100],
[3010292,100],
[3010293,100],
[3010294,100],
[3010295,100],
[3010296,100],
[3010297,100],
[3010298,100],
[3010299,100],
[3010300,100],
[3010301,100],
[3010302,100],
[3010303,100],
[3010304,100],
[3010305,100],
[3010306,100],
[3010307,100],
[3010308,100],
[3010311,100],
[3010313,100],
[3010314,100],
[3010315,100],
[3010316,100],
[3010317,100],
[3010318,100],
[3010319,100],
[3010320,100],
[3010321,100],
[3010322,100],
[3010354,100],
[3010355,100],
[3010356,100],
[3010357,100],
[3010360,100],
[3010361,100],
[3010362,100],
[3010364,100],
[3010365,100],
[3010368,100],
[3010369,100],
[3010370,100],
[3010371,100],
[3010373,100],
[3010374,100],
[3010375,100],
[3010376,100],
[3010377,100],
[3010383,100],
[3010390,100],
[3010397,100],//
[3010400,100],
[3010401,100],
[3010402,100],
[3010403,100],
[3010404,100],
[3010405,100],
[3010406,100],
[3010407,100],
[3010408,100],
[3010409,100],
[3010410,100],
[3010411,100],
[3010412,100],
[3010414,100],
[3010415,100],
[3010416,100],
[3010417,100],
[3010421,100],
[3010423,100],//
[3010428,100],
[3010429,100],
[3010430,100],
[3010431,100],
[3010432,100],
[3010433,100],
[3010434,100],
[3010435,100],
[3010436,100],
[3010437,100],
[3010438,100],
[3010439,100],
[3010440,100],
[3010441,100],
[3010442,100],
[3010443,100],
[3010444,100],
[3010445,100],
[3010446,100],
[3010447,100],
[3010448,100],
[3010449,100],
[3010450,100],
[3010451,100],
[3010452,100],
[3010453,100],
[3010454,100],
[3010455,100],
[3010456,100],
[3010457,100],
[3010458,100],
[3010459,100],
[3010460,100],
[3010461,100],
[3010462,100],
[3010464,100],
[3010465,100],
[3010490,100],
[3010491,100],
[3010492,100],
[3010493,100],
[3010494,100],
[3010495,100],
[3010499,100],
[3010500,100],
[3010501,100],
[3010502,100],
[3010503,100],
[3010504,100],
[3010505,100],
[3010506,100],
[3010507,100],
[3010508,100],
[3010509,100],
[3010510,100],
[3010511,100],
[3010512,100],
[3010513,100],
[3010514,100],
[3010515,100],
[3010516,100],
[3010517,100],
[3010518,100],
[3010519,100],
[3010520,100],
[3010521,100],
[3010522,100],
[3010523,100],
[3010524,100],
[3010525,100],
[3010526,100],
[3010527,100],
[3010528,100],
[3010530,100],
[3010531,100],
[3010532,100],
[3010533,100],

]

//////////////////////////////////////////////////////////
function start() {
status = -1;
action(1, 0, 0);
}

function action(mode, type, selection) {
if (mode == -1) {
cm.dispose();
} else {
if (status >= 0 && mode == 0) {
cm.dispose();
return;
}
if (mode == 1)
status++;
else
status--;
if (status == 0) {
	
	

	textz = "#k\t\t\t #r#v3010000#" + fbmc + "#v3010000##k#l\r\n\r\n";
	textz += "#b每次抽奖消耗#v"+costitem+"#x"+itemCount+"#k#n\r\n"
	textz += "补货中...（现在也可以抽）\r\n"
	textz += "#L0##b查看概率#l\r\n";
	textz += "#L1##b#e开始抽取#n#l\r\n";
	 
	cm.sendSimple (textz);   
	}else if (status == 1) {
		for (var i = 0; i <itemList.length; i++){
		sum += itemList[i][1]; 
		}
		if(selection == 0) {
			var string1 = "概率：\r\n"
			for(var i = 0;i < itemList.length;i++){
				chance1 = itemList[i][1] / sum * 100
				string1 += "#i"+itemList[i][0]+"##z"+itemList[i][0]+"#："+chance1+"%\r\n"
			}
			cm.sendOk(string1);
			cm.dispose();
			return
		}else if (selection == 1) {
			if(cm.haveItem(costitem,itemCount)){
				cm.gainItem(costitem,-itemCount)
				var chance = Math.floor(Math.random() * +sum);
				for (var i = 0; i <itemList.length; i++){
					chance -= itemList[i][1];
					if(chance <= 0){	
						finalchance = i;
						break;				
					}
				}
				var itemId = itemList[finalchance][0];
				cm.gainGachaponItem(itemId, 1, "椅子抽奖", 1);
				cm.getPlayer().setOneTimeLog("椅子搜集狂魔成就");
				cm.getPlayer().dropMessage(5,"椅子搜集狂魔成就进度："+cm.getPlayer().getOneTimeLog("椅子搜集狂魔成就")+"");
				cm.sendOk("恭喜你抽中了#v"+itemId+"#");
				cm.dispose();
				return
			}else{
				cm.sendOk("需要#v"+costitem+"#x"+itemCount+"！");
				cm.dispose();
				return
			}

		}else if (selection == 2) {


		}else if (selection == 3) {
			
		}else if (selection == 4) {
		}else if (selection == 5) {
		}
    }
      }
        

}
